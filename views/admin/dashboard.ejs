<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title><%= title %></title>
    <!-- Bootstrap & Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
    <style>
        body { background: #f4f6f9; margin: 0; padding: 0; }
        .admin-layout { display: flex; min-height: calc(100vh - 56px); }
        .sidebar { background: linear-gradient(180deg, #212529, #2c3034); color: #fff; width: 250px; flex-shrink: 0; display: flex; flex-direction: column; padding-top: 20px; position: sticky; top: 56px; height: calc(100vh - 56px); overflow-y: auto; border-bottom-left-radius: 40px; border-bottom-right-radius: 40px; box-shadow: 0 4px 20px rgba(0,0,0,0.4); transition: all 0.3s ease; }
        .sidebar h5 { padding-left: 1rem; margin-bottom: 1rem; font-weight: 600; }
        .sidebar .nav-link { color: #adb5bd; padding: 10px 20px; font-size: 0.95rem; border-radius: 8px; margin: 4px 12px; transition: all 0.3s ease; }
        .sidebar .nav-link:hover, .sidebar .nav-link.active { background-color: #495057; color: #fff; transform: translateX(4px); }
        .sidebar .logout-btn { margin-top: auto; padding: 15px; }
        .admin-content { flex: 1; padding: 20px; background: #f8f9fa; }
        .stat-card { border-radius: 15px; transition: 0.3s; }
        .stat-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.15); }
    </style>
</head>
<body>
<%- include('../partials/nav') %>

<div class="admin-layout">
    <!-- Sidebar -->
    <nav class="sidebar">
        <h5>Admin Menu</h5>
        <ul class="nav flex-column">
            <li><a class="nav-link active" href="/admin/dashboard"><i class="fas fa-home me-2"></i> Dashboard</a></li>
            <li><a class="nav-link" href="/admin/users"><i class="fas fa-users me-2"></i> Manage Users</a></li>
            <li><a class="nav-link" href="/admin/categories"><i class="fas fa-tags me-2"></i> Categories</a></li>
            <li><a class="nav-link" href="/admin/site-settings"><i class="fas fa-cogs me-2"></i> Site Settings</a></li>
        </ul>
        <div class="logout-btn">
            <a href="/logout" class="btn btn-danger w-100"><i class="fas fa-sign-out-alt me-2"></i> Logout</a>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="admin-content">
        <h2 class="h4 mb-4">Welcome, <%= user.name %> ðŸ‘‘</h2>

        <!-- Stats Cards -->
        <div class="row g-4 mb-4">
            <div class="col-md-4">
                <div class="card text-bg-primary shadow-sm stat-card">
                    <div class="card-body">
                        <h6><i class="fas fa-users me-2"></i> Total Users</h6>
                        <h3><%= totalUsers %></h3>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card text-bg-success shadow-sm stat-card">
                    <div class="card-body">
                        <h6><i class="fas fa-newspaper me-2"></i> Blogs Published</h6>
                        <h3><%= postsPublished %></h3>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card text-bg-info shadow-sm stat-card">
                    <div class="card-body">
                        <h6><i class="fas fa-folder-open me-2"></i> Total Categories</h6>
                        <h3><%= totalCategories %></h3>
                    </div>
                </div>
            </div>
        </div>

        <!-- Logs -->
        <div class="card shadow-sm mb-4">
            <div class="card-header bg-white"><i class="fas fa-history me-2"></i> Recent Activity</div>
            <div class="card-body p-0">
                <ul class="list-group list-group-flush">
                    <% logs.forEach(log => { %>
                        <li class="list-group-item">
                            <i class="fas fa-<%= log.icon %> text-muted me-2"></i>
                            <strong><%= log.action %></strong> â€” <%= log.details %>
                            <span class="text-muted float-end small"><%= log.createdAt.toLocaleString() %></span>
                        </li>
                    <% }) %>
                </ul>
            </div>
        </div>
    </main>
</div>

<%- include('../partials/footer') %>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
